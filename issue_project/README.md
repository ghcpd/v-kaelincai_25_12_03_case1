# ç”¨æˆ·æ³¨å†Œç³»ç»Ÿ - User Registration System

ä¸€ä¸ªç°ä»£åŒ–çš„ç”¨æˆ·æ³¨å†Œç³»ç»Ÿï¼ŒåŒ…å«ç²¾ç¾çš„å‰ç«¯UIå’ŒRESTful APIåç«¯ã€‚**æœ¬é¡¹ç›®æ•…æ„åŒ…å«ä¸€ä¸ªç®€å•çš„bugç”¨äºæ¼”ç¤ºå’Œå­¦ä¹ ç›®çš„ã€‚**

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ¼”ç¤ºäº†ä¸€ä¸ªå…¸å‹çš„ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
- ğŸ¨ ç°ä»£åŒ–çš„å“åº”å¼UIè®¾è®¡ï¼ˆè“ç™½é…è‰²ä¸»é¢˜ï¼‰
- ğŸ” ç”¨æˆ·è¾“å…¥éªŒè¯ï¼ˆå‰ç«¯ + åç«¯åŒé‡éªŒè¯ï¼‰
- ğŸ’¾ ç®€å•çš„JSONæ–‡ä»¶æ•°æ®å­˜å‚¨
- âš ï¸ **æ•…æ„æ¤å…¥çš„bug**ï¼šé‚®ç®±ç©ºå€¼å¤„ç†ç¼ºé™·

## ğŸ“ é¡¹ç›®ç»“æ„

```
issue_project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py          # åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ app.py               # Flaskåº”ç”¨ä¸»æ–‡ä»¶ï¼ˆåŒ…å«bugï¼‰
â”‚   â”œâ”€â”€ database.py          # ç”¨æˆ·æ•°æ®åº“æ“ä½œ
â”‚   â””â”€â”€ validators.py        # è¾“å…¥éªŒè¯å·¥å…·
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ test_registration.py # æµ‹è¯•ç”¨ä¾‹ï¼ˆ2ä¸ªä¼šå¤±è´¥ï¼‰
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css        # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ register.js      # å‰ç«¯äº¤äº’é€»è¾‘
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ register.html        # æ³¨å†Œé¡µé¢æ¨¡æ¿
â”œâ”€â”€ data/
â”‚   â””â”€â”€ users.json           # ç”¨æˆ·æ•°æ®å­˜å‚¨ï¼ˆè¿è¡Œæ—¶ç”Ÿæˆï¼‰
â”œâ”€â”€ requirements.txt         # Pythonä¾èµ–
â”œâ”€â”€ README.md               # æœ¬æ–‡ä»¶
â””â”€â”€ KNOWN_ISSUE.md          # é—®é¢˜è¯¦ç»†è¯´æ˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```powershell
pip install -r requirements.txt
```

### 2. è¿è¡Œæµ‹è¯•ï¼ˆæŸ¥çœ‹bugï¼‰

```powershell
python -m pytest tests/ -v
```

æˆ–ä½¿ç”¨unittestï¼š

```powershell
python -m unittest tests.test_registration -v
```

**é¢„æœŸç»“æœ**ï¼šæœ‰2ä¸ªæµ‹è¯•ä¼šå¤±è´¥ï¼ˆ`test_missing_email_field` å’Œ `test_null_email_value`ï¼‰ï¼Œè¿™äº›å¤±è´¥çš„æµ‹è¯•æš´éœ²äº†bugã€‚

### 3. è¿è¡Œåº”ç”¨

```powershell
python src/app.py
```

åº”ç”¨å°†åœ¨ http://localhost:5000 å¯åŠ¨

### 4. æµ‹è¯•æ³¨å†ŒåŠŸèƒ½

è®¿é—® http://localhost:5000 å¹¶å°è¯•ï¼š
- âœ… æ­£å¸¸æ³¨å†Œï¼šå¡«å†™æ‰€æœ‰å­—æ®µ
- âŒ è§¦å‘bugï¼šä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¿®æ”¹è¯·æ±‚ï¼Œå°†emailè®¾ä¸ºnull

## ğŸ› é—®é¢˜è¯´æ˜

### é—®é¢˜ç±»å‹
**æœªå¤„ç†ç©ºå€¼ï¼ˆNull Value Not Handledï¼‰**

### è§¦å‘æ¡ä»¶
å½“APIè¯·æ±‚ä¸­çš„`email`å­—æ®µä¸ºä»¥ä¸‹æƒ…å†µæ—¶ä¼šè§¦å‘500é”™è¯¯ï¼š
1. å­—æ®µä¸å­˜åœ¨ï¼ˆ`'email'` key missing in JSONï¼‰
2. å­—æ®µå€¼ä¸º `null`

### é¢„æœŸ vs å®é™…è¡Œä¸º

| åœºæ™¯ | é¢„æœŸè¡Œä¸º | å®é™…è¡Œä¸º |
|------|---------|---------|
| emailå­—æ®µç¼ºå¤± | è¿”å›400ï¼Œæç¤º"é‚®ç®±ä¸èƒ½ä¸ºç©º" | è¿”å›500ï¼ŒæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |
| email = null | è¿”å›400ï¼Œæç¤º"é‚®ç®±ä¸èƒ½ä¸ºç©º" | è¿”å›500ï¼ŒAttributeErrorå¼‚å¸¸ |
| email = "" | è¿”å›400ï¼Œæç¤º"é‚®ç®±ä¸èƒ½ä¸ºç©º" | âœ… æ­£ç¡®å¤„ç† |

### æ ¹æœ¬åŸå› 
**æ–‡ä»¶**: `src/app.py`  
**å‡½æ•°**: `register()`  
**è¡Œå·**: ç¬¬47è¡Œ

```python
email = data.get('email')  # å¯èƒ½è¿”å› None
email_normalized = email.lower()  # ğŸ› å½“emailä¸ºNoneæ—¶æŠ›å‡ºAttributeError
```

### æŠ€æœ¯ç»†èŠ‚
- `dict.get('key')` åœ¨keyä¸å­˜åœ¨æ—¶è¿”å› `None`
- å¯¹ `None` è°ƒç”¨ `.lower()` æ–¹æ³•ä¼šæŠ›å‡ºï¼š`AttributeError: 'NoneType' object has no attribute 'lower'`
- å¼‚å¸¸è¢«æ•è·åè¿”å›é€šç”¨500é”™è¯¯ï¼Œç”¨æˆ·ä½“éªŒå·®

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

é¡¹ç›®åŒ…å«8ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼š

âœ… **é€šè¿‡çš„æµ‹è¯•**ï¼ˆ6ä¸ªï¼‰ï¼š
- `test_successful_registration` - æ­£å¸¸æ³¨å†Œæµç¨‹
- `test_uppercase_email_normalization` - å¤§å†™é‚®ç®±è½¬å°å†™
- `test_empty_string_email` - ç©ºå­—ç¬¦ä¸²é‚®ç®±
- `test_duplicate_email` - é‡å¤é‚®ç®±æ£€æµ‹
- `test_invalid_email_format` - æ— æ•ˆé‚®ç®±æ ¼å¼
- `test_short_password` - å¯†ç é•¿åº¦éªŒè¯

âŒ **å¤±è´¥çš„æµ‹è¯•**ï¼ˆ2ä¸ªï¼Œæ­ç¤ºbugï¼‰ï¼š
- `test_missing_email_field` - ç¼ºå°‘emailå­—æ®µ
- `test_null_email_value` - emailå€¼ä¸ºnull

## ğŸ¨ UI/UX ç‰¹æ€§

- âœ¨ å¡ç‰‡å¼è®¾è®¡ï¼Œå±…ä¸­å¸ƒå±€
- ğŸŒˆ æŸ”å’Œçš„è“ç™½é…è‰²ä¸»é¢˜
- ğŸ”„ åŠ è½½åŠ¨ç”»å’Œäº¤äº’åé¦ˆ
- âš¡ å®æ—¶è¾“å…¥éªŒè¯
- ğŸ“± å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯å‹å¥½ï¼‰
- â™¿ æ— éšœç¢æ”¯æŒ

## ğŸ”§ æŠ€æœ¯æ ˆ

- **åç«¯**: Python 3.8+, Flask 2.3+
- **å‰ç«¯**: HTML5, CSS3, Vanilla JavaScript
- **å­˜å‚¨**: JSONæ–‡ä»¶
- **æµ‹è¯•**: unittest

## ğŸ“Š APIæ¥å£

### POST /api/register
æ³¨å†Œæ–°ç”¨æˆ·

**è¯·æ±‚ä½“**:
```json
{
  "username": "testuser",
  "email": "test@example.com",
  "password": "password123"
}
```

**æˆåŠŸå“åº”** (201):
```json
{
  "success": true,
  "message": "æ³¨å†ŒæˆåŠŸï¼",
  "user": {
    "id": 1,
    "email": "test@example.com",
    "username": "testuser"
  }
}
```

**é”™è¯¯å“åº”** (400/500):
```json
{
  "success": false,
  "error": "é”™è¯¯ä¿¡æ¯"
}
```

## ğŸ” è°ƒè¯•å»ºè®®

æŸ¥çœ‹è¯¦ç»†çš„é—®é¢˜åˆ†æå’Œä¿®å¤æ€è·¯ï¼Œè¯·å‚é˜… [KNOWN_ISSUE.md](KNOWN_ISSUE.md)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›®**ï¼ŒåŒ…å«æ•…æ„æ¤å…¥çš„bug
2. å¯†ç ä»¥æ˜æ–‡å­˜å‚¨ï¼Œç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨bcryptç­‰åŠ å¯†
3. ä½¿ç”¨JSONæ–‡ä»¶å­˜å‚¨ï¼Œç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨æ•°æ®åº“
4. æ²¡æœ‰å®ç°ä¼šè¯ç®¡ç†å’Œè®¤è¯
5. ç¼ºå°‘CSRFä¿æŠ¤

## ğŸ“ License

MIT License - ä»…ä¾›å­¦ä¹ å’Œæ¼”ç¤ºä½¿ç”¨

---

**Created for Bug Demonstration & Learning Purposes** ğŸ›
